<h1>Task Manager</h1>
<app-add-task (taskAdded)="onTaskAdded($event)"></app-add-task>

<div class="task-columns">
    <div class="task-column">
        <h2>To Do</h2>
        <div *ngFor="let task of toDoTasks" class="task-card">
            <h3>{{ task.title }}</h3>
            <p>{{ task.description }}</p>
            <p>{{ task.createdAt | date:'short' }}</p>
            <small>State: {{ task.state }}</small>
            <input type="checkbox" [checked]="task.completed" (change)="toggleTaskCompletion(task.id)">
            <button (click)="removeTask(task.id)">Remove</button>
            <select (change)="updateTaskState(task.id, $event)">
                <option value="To Do" [selected]="task.state === 'To Do'">To Do</option>
                <option value="In Progress" [selected]="task.state === 'In Progress'">In Progress</option>
                <option value="Done" [selected]="task.state === 'Done'">Done</option>
            </select>
        </div>
    </div>

    <div class="task-column">
        <h2>In Progress</h2>
        <div *ngFor="let task of inProgressTasks" class="task-card">
            <h3>{{ task.title }}</h3>
            <p>{{ task.description }}</p>
            <small>State: {{ task.state }}</small>
            <input type="checkbox" [checked]="task.completed" (change)="toggleTaskCompletion(task.id)">
            <button (click)="removeTask(task.id)">Remove</button>
            <select (change)="updateTaskState(task.id, $event)">
                <option value="To Do" [selected]="task.state === 'To Do'">To Do</option>
                <option value="In Progress" [selected]="task.state === 'In Progress'">In Progress</option>
                <option value="Done" [selected]="task.state === 'Done'">Done</option>
            </select>
        </div>
    </div>

    <div class="task-column">
        <h2>Done</h2>
        <div *ngFor="let task of doneTasks" class="task-card">
            <h3>{{ task.title }}</h3>
            <p>{{ task.description }}</p>
            <small>State: {{ task.state }}</small>
            <input type="checkbox" [checked]="task.completed" (change)="toggleTaskCompletion(task.id)">
            <button (click)="removeTask(task.id)">Remove</button>
            <select (change)="updateTaskState(task.id, $event)">
                <option value="To Do" [selected]="task.state === 'To Do'">To Do</option>
                <option value="In Progress" [selected]="task.state === 'In Progress'">In Progress</option>
                <option value="Done" [selected]="task.state === 'Done'">Done</option>
            </select>
        </div>
    </div>
</div>
